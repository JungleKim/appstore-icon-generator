var iOS={};iOS.assetName="AppIcon.appiconset",iOS.icons=[{size:{width:29,height:29},scale:1},{size:{width:29,height:29},scale:2},{size:{width:29,height:29},scale:3},{size:{width:40,height:40},scale:1},{size:{width:40,height:40},scale:2},{size:{width:40,height:40},scale:3},{size:{width:60,height:60},scale:2},{size:{width:60,height:60},scale:3},{size:{width:76,height:76},scale:1},{size:{width:76,height:76},scale:2},{size:{width:83.5,height:83.5},scale:2}],iOS.ContentsName="Contents.json",iOS.Contents={images:[{size:"40x40",idiom:"iphone",filename:"Icon-40@3x.png",scale:"3x"},{size:"60x60",idiom:"iphone",filename:"Icon-60@2x.png",scale:"2x"},{size:"60x60",idiom:"iphone",filename:"Icon-60@3x.png",scale:"3x"},{size:"29x29",idiom:"iphone",filename:"Icon-29@2x.png",scale:"2x"},{size:"29x29",idiom:"iphone",filename:"Icon-29@3x.png",scale:"3x"},{size:"40x40",idiom:"iphone",filename:"Icon-40@2x.png",scale:"2x"},{size:"29x29",idiom:"ipad",filename:"Icon-29.png",scale:"1x"},{size:"29x29",idiom:"ipad",filename:"Icon-29@2x.png",scale:"2x"},{size:"40x40",idiom:"ipad",filename:"Icon-40.png",scale:"1x"},{size:"40x40",idiom:"ipad",filename:"Icon-40@2x.png",scale:"2x"},{size:"76x76",idiom:"ipad",filename:"Icon-76.png",scale:"1x"},{size:"76x76",idiom:"ipad",filename:"Icon-76@2x.png",scale:"2x"},{size:"83.5x83.5",idiom:"ipad",filename:"Icon-83.5@2x.png",scale:"2x"}],info:{version:1,author:"xcode"}},function(e,i){"use strict";var n=function(){var e=function(i){if(i=i||{},"validators"in i){var n=Object.prototype.toString.call(i.validators);"[object Array]"===n&&(e.validators=i.validators)}"callback"in i&&(e.callback=i.callback)};e.currentFile=i,e.callbackType={FileInValid:0,FileValid:1,Clear:2,Progress:3,SaveFail:4,SaveSuccess:5},e.sendCallback=function(e,i){this.callback&&e in this.callbackType&&this.callback(this.callbackType[e],i)},e.setFile=function(e){var i=this,n=(this.validators||[]).map(function(i){return i(e)});Promise.all(n).then(function(n){var a=!0;n.forEach(function(e,i){a&=e});var t="FileInValid";a&&(i.currentFile=e,t="FileValid"),i.sendCallback(t,{file:i.currentFile})},function(e){i.sendCallback("FileInValid")})},e.clear=function(){this.currentFile=i,this.sendCallback("Clear")},e.save=function(){if(this.currentFile==i)return void this.sendCallback("SaveFail");var e=this;new Promise(function(i,n){var a=new FileReader;a.onload=i,a.onerror=n,a.readAsDataURL(e.currentFile)}).then(function(e){return n.makeResizePromises(e.target.result)},function(){}).then(function(e){var i=new JSZip;return i.file(iOS.ContentsName,JSON.stringify(iOS.Contents)),e.forEach(function(e,n){i.file(e.filename,e.data.replace("data:image/png;base64,",""),{base64:!0})}),i.generateAsync({type:"blob"})}).then(function(e){saveAs(e,iOS.assetName+".zip")})};var n={};return n.makeResizePromises=function(e){var i=[];return iOS.icons.forEach(function(a,t){i.push(n.resizePromise(e,a.size,a.scale))}),Promise.all(i)},n.resizePromise=function(e,i,n){return new Promise(function(a,t){var o=document.createElement("canvas"),r=o.getContext("2d"),l=new Image;l.onload=function(){o.width=i.width*n,o.height=i.height*n,r.drawImage(l,0,0,o.width,o.height),a(o.toDataURL())},l.onerror=t,l.src=e}).then(function(e){var a="Icon-"+i.width;return 1!=n&&(a+="@"+n+"x"),a+=".png",{data:e,filename:a}},function(){console.log("Reject: "+i)})},e};e.ImageFactory=n()}("undefined"==typeof window?this:window),$(function(){return checkFileAPI()?(makeImageFactory(),blockMovePage(),draggable(),void $(".button").on("click",function(){ImageFactory.save()})):void alert("The File APIs are not fully supported in this browser.")});var checkFileAPI=function(){return window.File&&window.FileReader&&window.FileList&&window.Blob},makeImageFactory=function(){ImageFactory({validators:[function(e){return new Promise(function(i,n){e.type.match(/image\/(png|jpe?g)/)||n("Not Supported FileType"),i(!0)})},function(e){return new Promise(function(i,n){var a=new FileReader;a.onload=i,a.onerror=n,a.readAsDataURL(e)}).then(function(e){var i=new Image;return i.src=e.target.result,1024===i.width&&1024===i.height},function(){return"File Load Error"})}],callback:callback})},blockMovePage=function(){$(window).on("dragover",function(e){e.preventDefault()}),$(window).on("drop",function(e){e.preventDefault()})},draggable=function(){var e=$(".dnd");e.on("drop",function(e){e.preventDefault(),e.stopPropagation();var i=e.originalEvent.target.files||e.originalEvent.dataTransfer.files;i.length>1&&alert("Do Not Support Multiple Image"),ImageFactory.setFile(i[0])}),e.on("dragover",function(e){}),e.on("dragenter dragleave",function(e){console.log("dragenter || dragleave"),e.preventDefault(),e.stopPropagation()})},callback=function(e,i){console.log(e)};