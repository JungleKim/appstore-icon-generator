var iOS={};iOS.assetName="AppIcon.appiconset",iOS.icons=[{size:{width:29,height:29},scale:1},{size:{width:29,height:29},scale:2},{size:{width:29,height:29},scale:3},{size:{width:40,height:40},scale:1},{size:{width:40,height:40},scale:2},{size:{width:40,height:40},scale:3},{size:{width:60,height:60},scale:2},{size:{width:60,height:60},scale:3},{size:{width:76,height:76},scale:1},{size:{width:76,height:76},scale:2},{size:{width:83.5,height:83.5},scale:2}],iOS.ContentsName="Contents.json",iOS.Contents={images:[{size:"40x40",idiom:"iphone",filename:"Icon-40@3x.png",scale:"3x"},{size:"60x60",idiom:"iphone",filename:"Icon-60@2x.png",scale:"2x"},{size:"60x60",idiom:"iphone",filename:"Icon-60@3x.png",scale:"3x"},{size:"29x29",idiom:"iphone",filename:"Icon-29@2x.png",scale:"2x"},{size:"29x29",idiom:"iphone",filename:"Icon-29@3x.png",scale:"3x"},{size:"40x40",idiom:"iphone",filename:"Icon-40@2x.png",scale:"2x"},{size:"29x29",idiom:"ipad",filename:"Icon-29.png",scale:"1x"},{size:"29x29",idiom:"ipad",filename:"Icon-29@2x.png",scale:"2x"},{size:"40x40",idiom:"ipad",filename:"Icon-40.png",scale:"1x"},{size:"40x40",idiom:"ipad",filename:"Icon-40@2x.png",scale:"2x"},{size:"76x76",idiom:"ipad",filename:"Icon-76.png",scale:"1x"},{size:"76x76",idiom:"ipad",filename:"Icon-76@2x.png",scale:"2x"},{size:"83.5x83.5",idiom:"ipad",filename:"Icon-83.5@2x.png",scale:"2x"}],info:{version:1,author:"xcode"}},function(e,a){"use strict";var i=function(){var e=function(a){if(a=a||{},"validators"in a){var i=Object.prototype.toString.call(a.validators);"[object Array]"===i&&(e.validators=a.validators)}"callback"in a&&(e.callback=a.callback)};e.currentFile=a,e.callbackType={FileInValid:0,FileValid:1,Clear:2,SaveFail:3,SaveSuccess:4},e.sendCallback=function(e,a){this.callback&&e in this.callbackType&&this.callback(this.callbackType[e],a)},e.setFile=function(e){var i=this,n=(this.validators||[]).map(function(a){return a(e)});Promise.all(n).then(function(n){var t=!0;n.forEach(function(e,a){t&=e}),t?(i.currentFile=e,i.sendCallback("FileValid",{msg:i.currentFile.name})):(i.currentFile=a,i.sendCallback("FileInValid",{msg:"Only Supported 1024x1024 Image"}))},function(e){i.sendCallback("FileInValid",{msg:e})})},e.clear=function(){this.currentFile=a,this.sendCallback("Clear")},e.save=function(){if(this.currentFile==a)return void this.sendCallback("SaveFail",{msg:"Not Exist File"});var e=this;new Promise(function(a,i){var n=new FileReader;n.onload=a,n.onerror=i,n.readAsDataURL(e.currentFile)}).then(function(e){return i.makeResizePromises(e.target.result)},function(){}).then(function(e){var a=new JSZip;return a.file(iOS.ContentsName,JSON.stringify(iOS.Contents)),e.forEach(function(e,i){a.file(e.filename,e.data.replace("data:image/png;base64,",""),{base64:!0})}),a.generateAsync({type:"blob"})}).then(function(a){saveAs(a,iOS.assetName+".zip"),e.sendCallback("SaveSuccess")})};var i={};return i.makeResizePromises=function(e){var a=[];return iOS.icons.forEach(function(n,t){a.push(i.resizePromise(e,n.size,n.scale))}),Promise.all(a)},i.resizePromise=function(e,a,i){return new Promise(function(n,t){var o=document.createElement("canvas"),r=o.getContext("2d"),c=new Image;c.onload=function(){o.width=a.width*i,o.height=a.height*i,r.drawImage(c,0,0,o.width,o.height),n(o.toDataURL())},c.onerror=t,c.src=e}).then(function(e){var n="Icon-"+a.width;return 1!=i&&(n+="@"+i+"x"),n+=".png",{data:e,filename:n}},function(){console.log("Reject: "+a)})},e};e.ImageFactory=i()}("undefined"==typeof window?this:window),$(function(){if(!checkFileAPI())return void showError("The File APIs are not fully supported in this browser.");makeImageFactory(),blockMovePage();var e=$(".generator");e.on("drag dragstart dragend dragover dragenter dragleave drop",function(e){e.preventDefault(),e.stopPropagation()}).on("dragenter",function(){e.addClass("dragover")}).on("dragleave dragend drop",function(){e.removeClass("dragover")}).on("drop",dropImage);var a=$(".generator__file");a.on("change",dropImage),$(".action .button.clear").on("click",function(){ImageFactory.clear()}),$(".action .button.save").on("click",function(){ImageFactory.save()})});var checkFileAPI=function(){return window.File&&window.FileReader&&window.FileList&&window.Blob},makeImageFactory=function(){ImageFactory({validators:[function(e){return new Promise(function(a,i){e.type.match(/image\/(png|jpe?g)/)||i("Only Supported png|jpe?g"),a(!0)})},function(e){return new Promise(function(a,i){var n=new FileReader;n.onload=a,n.onerror=i,n.readAsDataURL(e)}).then(function(e){var a=new Image;return a.src=e.target.result,1024===a.width&&1024===a.height})}],callback:callback})},blockMovePage=function(){$(window).on("dragover",function(e){e.preventDefault()}),$(window).on("drop",function(e){e.preventDefault()})},dropImage=function(e){var a=e.originalEvent.target.files||e.originalEvent.dataTransfer.files;return a.length>1?void showError("Do Not Support Multiple Image!"):void ImageFactory.setFile(a[0])},callback=function(e,a){e===ImageFactory.callbackType.FileInValid||e===ImageFactory.callbackType.FileValid||e===ImageFactory.callbackType.SaveFail?($(".generator__input").removeClass("show"),$(".generator__msg").addClass("show").html(a.msg),e===ImageFactory.callbackType.FileValid?($(".action .button.save").removeClass("in-active"),$(".generator__msg").removeClass("error")):($(".action .button.save").addClass("in-active"),$(".generator__msg").addClass("error"))):e===ImageFactory.callbackType.Clear?($(".action .button.save").addClass("in-active"),$(".generator__input").addClass("show"),$(".generator__msg").removeClass("show").html("")):e===ImageFactory.callbackType.SaveSuccess};